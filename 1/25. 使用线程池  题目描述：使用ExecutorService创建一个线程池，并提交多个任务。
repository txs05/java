import java.util.concurrent.*;

public class ThreadPoolExample {
    public static void main(String[] args) {
        // 1. 创建线程池（固定大小为3）
        ExecutorService threadPool = Executors.newFixedThreadPool(3);

        System.out.println("线程池已创建，准备提交任务...");

        // 2. 提交5个任务到线程池
        for (int i = 1; i <= 5; i++) {
            final int taskId = i;

            threadPool.execute(() -> {
                // 任务执行逻辑
                System.out.println("任务 " + taskId + " 开始执行，线程: " +
                        Thread.currentThread().getName());

                try {
                    // 模拟任务执行时间
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

                System.out.println("任务 " + taskId + " 执行完成");
            });
        }

        // 3. 关闭线程池（不再接受新任务）
        threadPool.shutdown();

        try {
            // 等待所有任务完成，最多等待10秒
            if (threadPool.awaitTermination(10, TimeUnit.SECONDS)) {
                System.out.println("\n所有任务已完成");
            } else {
                System.out.println("\n等待超时，仍有任务在执行");
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}
